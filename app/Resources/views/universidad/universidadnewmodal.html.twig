<div class="modal fade" id="newUniversidad" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div style="width:70%; margin-left: 15%" class="modal-dialog">
        <div class="modal-content"  style="border-radius: 40px">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 align="center"><strong>Universidad</strong></h3>
            </div>
            <div class="modal-body">

                <div  style="width:90%; margin-top: 3%; margin-left: 5%; background-color:#F3F3F3; border-radius:5px " class="panel panel-default">

                    <div class="col col-md-12" align="center" >
                        <img style="width:80px;margin-top: 2%;margin-bottom: 2%" src="{{ asset('img/icons/university.png') }}"></img>
                    </div>
                    <div class="col col-md-12 " align="center" style="margin-top:-15px">
                        <h2 class="col col-md-12" style="font-family: palatino header" >Registrar Universidad</h2>
                        <h4 class="col col-md-12" style="color:grey; font-family: palatino body; margin-top: -3px;">Complete los campos requeridos:<span style="font-size: 25;color: red" >*</span></h4>

                    </div>
                    <hr>
                    <div  class="container"  style="width: 80%; margin-top: 3%; margin-bottom: 3%">
                        {{ form_start(form,{'attr':{'action':path('universidad_newmodal'), 'method':'POST', 'id':'test'}}) }}
                        <div class="row">
                            <div class="col col-md-12">
                                <label for="form_lastname">Nombre<span style="font-size: 25;color: red" >*</span></label>
                                {{ form_widget(form.nombreuniversidad) }}
                                {{ form_errors(form.nombreuniversidad) }}
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col col-md-12">
                                <label for="form_lastname">Siglas<span style="font-size: 25;color: red" >*</span></label>
                                {{ form_widget(form.siglas) }}
                                {{ form_errors(form.siglas) }}
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col col-md-12">
                                <label for="form_lastname">Estado</label>
                                {{ form_widget(form.estadouniversidad) }}
                                {{ form_errors(form.estadouniversidad) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col col-md-12" align="right">
                            <button type="button" id="#mySubmitButton" class"btn btn-default" > Save </button>
                            <button type="submit" id="#myHIDDENSubmitButton" style="display:none;"></button>

                            </div>
                        </div>
                        {{ form_end(form) }}

                    </div>
                </div>
                <br>
            </div>

        </div>
    </div>
</div>


{% block javascripts %}
<script>

$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

$(document).on("submit", "#test", function(e){
    e.preventDefault();
    return  false;
});

$(document).on("click", "#mySubmitButton", function(e){
  e.preventDefault();
  var form = $("#test");

  // you could make use of html5 form validation
  if(!form.checkValidity()){

    // To show the native error hints you can fake a click() on the actual submit button
    // which must not be the button #mySubmitButton and shall be hidden with display:none;
    //  example:
    //  <button type="button" id="#mySubmitButton" class"btn btn-default" > Save </button>
    //  <button type="submit" id="#myHIDDENSubmitButton" style="display:none;"></button>
    //
    $("#myHIDDENSubmitButton").click();
    return false;
  }

  // get the properties and values from the form
  var form_data = form.serializeObject();

  // always makes sense to signal user that something is happening
  $('#loadingSpinner').show();

  // simple approach avoid submitting multiple times
  $('#mySubmitButton').attr("disabled",true);

  // the actual request to your newAction
  $.ajax({
    url: "{{ path('universidad_newmodal') }}",
    type: 'POST',
    dataType: 'json',
    data: form_data,
    success:function(data){

      // handling the response data from the controller
      if(data.status == 'error'){
        console.log("[API] ERROR: "+data.message);
      }
      if(data.status == 'success'){
        console.log("[API] SUCCESS: "+data.message);
      }

      // signal to user the action is done
      $('#loadingSpinner').hide();
      $('#mySubmitButton').attr("disabled",false);
    }
  });
});
</script>
{% endblock %}